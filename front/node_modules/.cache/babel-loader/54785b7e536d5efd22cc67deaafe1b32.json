{"ast":null,"code":"import Duration from \"../duration.js\";\n\nfunction dayDiff(earlier, later) {\n  const utcDayStart = dt => dt.toUTC(0, {\n    keepLocalTime: true\n  }).startOf(\"day\").valueOf(),\n        ms = utcDayStart(later) - utcDayStart(earlier);\n\n  return Math.floor(Duration.fromMillis(ms).as(\"days\"));\n}\n\nfunction highOrderDiffs(cursor, later, units) {\n  const differs = [[\"years\", (a, b) => b.year - a.year], [\"quarters\", (a, b) => b.quarter - a.quarter + (b.year - a.year) * 4], [\"months\", (a, b) => b.month - a.month + (b.year - a.year) * 12], [\"weeks\", (a, b) => {\n    const days = dayDiff(a, b);\n    return (days - days % 7) / 7;\n  }], [\"days\", dayDiff]];\n  const results = {};\n  const earlier = cursor;\n  let lowestOrder, highWater;\n\n  for (const [unit, differ] of differs) {\n    if (units.indexOf(unit) >= 0) {\n      lowestOrder = unit;\n      results[unit] = differ(cursor, later);\n      highWater = earlier.plus(results);\n\n      if (highWater > later) {\n        results[unit]--;\n        cursor = earlier.plus(results);\n      } else {\n        cursor = highWater;\n      }\n    }\n  }\n\n  return [cursor, results, highWater, lowestOrder];\n}\n\nexport default function (earlier, later, units, opts) {\n  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);\n  const remainingMillis = later - cursor;\n  const lowerOrderUnits = units.filter(u => [\"hours\", \"minutes\", \"seconds\", \"milliseconds\"].indexOf(u) >= 0);\n\n  if (lowerOrderUnits.length === 0) {\n    if (highWater < later) {\n      highWater = cursor.plus({\n        [lowestOrder]: 1\n      });\n    }\n\n    if (highWater !== cursor) {\n      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);\n    }\n  }\n\n  const duration = Duration.fromObject(results, opts);\n\n  if (lowerOrderUnits.length > 0) {\n    return Duration.fromMillis(remainingMillis, opts).shiftTo(...lowerOrderUnits).plus(duration);\n  } else {\n    return duration;\n  }\n}","map":{"version":3,"sources":["/Users/luna/Documents/Elice_1st_Project/portfolio-share-service-racer/front/node_modules/luxon/src/impl/diff.js"],"names":["Duration","dayDiff","earlier","later","utcDayStart","dt","toUTC","keepLocalTime","startOf","valueOf","ms","Math","floor","fromMillis","as","highOrderDiffs","cursor","units","differs","a","b","year","quarter","month","days","results","lowestOrder","highWater","unit","differ","indexOf","plus","opts","remainingMillis","lowerOrderUnits","filter","u","length","duration","fromObject","shiftTo"],"mappings":"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","sourcesContent":["import Duration from \"../duration.js\";\n\nfunction dayDiff(earlier, later) {\n  const utcDayStart = (dt) => dt.toUTC(0, { keepLocalTime: true }).startOf(\"day\").valueOf(),\n    ms = utcDayStart(later) - utcDayStart(earlier);\n  return Math.floor(Duration.fromMillis(ms).as(\"days\"));\n}\n\nfunction highOrderDiffs(cursor, later, units) {\n  const differs = [\n    [\"years\", (a, b) => b.year - a.year],\n    [\"quarters\", (a, b) => b.quarter - a.quarter + (b.year - a.year) * 4],\n    [\"months\", (a, b) => b.month - a.month + (b.year - a.year) * 12],\n    [\n      \"weeks\",\n      (a, b) => {\n        const days = dayDiff(a, b);\n        return (days - (days % 7)) / 7;\n      },\n    ],\n    [\"days\", dayDiff],\n  ];\n\n  const results = {};\n  const earlier = cursor;\n  let lowestOrder, highWater;\n\n  for (const [unit, differ] of differs) {\n    if (units.indexOf(unit) >= 0) {\n      lowestOrder = unit;\n\n      results[unit] = differ(cursor, later);\n      highWater = earlier.plus(results);\n\n      if (highWater > later) {\n        results[unit]--;\n        cursor = earlier.plus(results);\n      } else {\n        cursor = highWater;\n      }\n    }\n  }\n\n  return [cursor, results, highWater, lowestOrder];\n}\n\nexport default function (earlier, later, units, opts) {\n  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);\n\n  const remainingMillis = later - cursor;\n\n  const lowerOrderUnits = units.filter(\n    (u) => [\"hours\", \"minutes\", \"seconds\", \"milliseconds\"].indexOf(u) >= 0\n  );\n\n  if (lowerOrderUnits.length === 0) {\n    if (highWater < later) {\n      highWater = cursor.plus({ [lowestOrder]: 1 });\n    }\n\n    if (highWater !== cursor) {\n      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);\n    }\n  }\n\n  const duration = Duration.fromObject(results, opts);\n\n  if (lowerOrderUnits.length > 0) {\n    return Duration.fromMillis(remainingMillis, opts)\n      .shiftTo(...lowerOrderUnits)\n      .plus(duration);\n  } else {\n    return duration;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}