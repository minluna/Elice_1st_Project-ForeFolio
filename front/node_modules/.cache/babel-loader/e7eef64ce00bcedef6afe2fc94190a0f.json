{"ast":null,"code":"var _jsxFileName = \"/Users/luna/Documents/Elice_1st_Project/portfolio-share-service-racer/front/src/pages/wanted/WantedRead.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useContext, useState, useCallback } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { Container, Row, Col, Card, Form, Button } from \"react-bootstrap\";\nimport * as Api from \"../../api\";\nimport { UserStateContext } from \"../../App\";\nimport { DateTime } from \"luxon\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CommentToRelative = _ref => {\n  let {\n    date\n  } = _ref;\n  const preDate = new Date(date);\n  const luxonDate = DateTime.fromJSDate(preDate);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: luxonDate.toRelative()\n  }, void 0, false);\n};\n\n_c = CommentToRelative;\n\nfunction WantedUpdate() {\n  _s();\n\n  var _userState$user$_id;\n\n  const navigate = useNavigate();\n  const [commentSaveContent, setCommentSaveContent] = useState(\"\");\n  const [commentContent, setCommentContent] = useState(\"\");\n  const [writerName, setWriterName] = useState(\"\");\n  const [writerDescription, setWriterDescription] = useState(\"\");\n  const [writerImage, setWriterImage] = useState(\"\");\n  const [commentList, setCommentList] = useState([]);\n  const [isSave, setIsSave] = useState(false);\n  const userState = useContext(UserStateContext);\n  const {\n    state\n  } = useLocation();\n  const {\n    wanted\n  } = state;\n  const isWantedEditable = ((_userState$user$_id = userState.user._id) !== null && _userState$user$_id !== void 0 ? _userState$user$_id : userState.user.id) === wanted.userId;\n\n  const onChangeSaveComment = e => {\n    setCommentSaveContent(e.target.value);\n  };\n\n  const onChangeComment = e => {\n    setCommentContent(e.target.value);\n  };\n\n  const fetchWriterInfo = useCallback(async () => {\n    try {\n      const userId = wanted.userId; // \"/user/user_id\" 엔드포인트로 get요청함.(userId는 req.currentUserId 사용)\n\n      const res = await Api.get(`user/${userId}`);\n      const writerInfo = res.data.userInfo;\n      setWriterName(writerInfo.name);\n      setWriterDescription(writerInfo.description);\n\n      if (!writerInfo.userImage) {\n        setWriterImage(\"http://placekitten.com/200/200\");\n      } else {\n        setWriterImage(writerInfo.userImage.imageUri);\n      }\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log(\"작성자 불러오기에 실패하였습니다.\", err);\n    }\n  }, [wanted.userId]);\n  const fetchCommentList = useCallback(async () => {\n    try {\n      const res = await Api.get(`comment/${wanted._id}`);\n      setCommentList(res.data);\n      setIsSave(false);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n    }\n  }, [wanted._id, isSave]);\n\n  const handleSubmit = async () => {\n    try {\n      // \"comment/wantedId\" 엔드포인트로 post요청함.\n      await Api.post(`comment/${wanted._id}`, {\n        commentSaveContent\n      });\n      setCommentSaveContent(\"\");\n      setIsSave(true);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log(\"댓글 추가에 실패하였습니다.\", err);\n    }\n  };\n\n  const handleCommentEdit = id => {\n    setCommentList(prevComments => {\n      return prevComments.map(comment => {\n        if (comment._id === id) {\n          return { ...comment,\n            isEdit: true\n          };\n        } else {\n          return comment;\n        }\n      });\n    });\n    const comment = commentList.filter(comment => comment._id === id)[0];\n    setCommentContent(comment.commentContent);\n  };\n\n  const handleCommentEditSubmit = async id => {\n    try {\n      // \"comment/commentId\" 엔드포인트로 put요청함.\n      await Api.put(`comment/${id}`, {\n        commentContent\n      });\n      setCommentContent(\"\");\n      setIsSave(true);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log(\"댓글수정에 실패하였습니다.\");\n    }\n  };\n\n  const handleCommentEditRemove = async id => {\n    try {\n      // \"comment/commentId\" 엔드포인트로 delete요청함.\n      await Api.delete(`comment/${id}`);\n      setCommentContent(\"\");\n      setIsSave(true);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log(\"댓글삭제에 실패하였습니다.\");\n    }\n  };\n\n  const handleCancel = id => {\n    setCommentList(prevComments => {\n      return prevComments.map(comment => {\n        if (comment._id === id) {\n          return { ...comment,\n            isEdit: false\n          };\n        } else {\n          return comment;\n        }\n      });\n    });\n  }; //작성일자, 시간의 표현값을 변환해주는 함수\n\n\n  function dateTime(dateStr) {\n    const date = new Date(dateStr);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, \"0\");\n    const day = String(date.getDate()).padStart(2, \"0\");\n    const timeString = date.toLocaleTimeString();\n    return `${year}-${month}-${day} ${timeString}`;\n  }\n\n  useEffect(() => {\n    // 만약 전역 상태의 user가 null이라면, 로그인 페이지로 이동함.\n    if (!userState.user) {\n      navigate(\"/login\");\n      return;\n    }\n\n    fetchWriterInfo();\n    fetchCommentList();\n  }, [userState, navigate, fetchWriterInfo, fetchCommentList]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      xs: \"auto\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        xs: 6,\n        className: \"text-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD300\\uC6D0 \\uAD6C\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD300\\uC6D0 \\uBAA8\\uC9D1\\uC744 \\uD655\\uC778\\uD558\\uACE0 \\uD504\\uB85C\\uC81D\\uD2B8\\uC5D0 \\uCC38\\uC5EC\\uD574\\uBCF4\\uC138\\uC694.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), \"\\uC6D0\\uD558\\uB294 \\uD504\\uB85C\\uC81D\\uD2B8\\uAC00 \\uC5C6\\uC744 \\uACBD\\uC6B0 \\uC9C1\\uC811 \\uD300\\uC6D0\\uC744 \\uBAA8\\uC9D1\\uD560 \\uC218 \\uC788\\uC5B4\\uC694.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: 6,\n        className: \"mb-3 text-end\",\n        children: [isWantedEditable && /*#__PURE__*/_jsxDEV(Button, {\n          className: \"me-3\",\n          variant: \"primary\",\n          onClick: () => navigate(\"/wanted/update\", {\n            state: {\n              wanted: wanted\n            }\n          }),\n          children: \"\\uC218\\uC815\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"me-3\",\n          variant: \"primary\",\n          onClick: () => navigate(\"/wanted\"),\n          children: \"\\uBAA9\\uB85D\\uC73C\\uB85C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n            children: wanted.wantedTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n            children: [\"\\uC791\\uC131\\uC790 : \", writerName, \" \\xA0\\xA0\\xA0\\xA0 \\uC791\\uC131\\uC77C\\uC2DC : \", dateTime(wanted.createdAt)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: /*#__PURE__*/_jsxDEV(Card.Text, {\n            children: wanted.wantedContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            xs: \"auto\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(Card.Img, {\n                style: {\n                  width: \"5rem\",\n                  height: \"5rem\",\n                  borderRadius: \"70%\",\n                  overflow: \"hidden\"\n                },\n                className: \"mb-3\",\n                src: writerImage,\n                alt: \"\\uD398\\uC774\\uC9C0 \\uC791\\uC131\\uC790\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                className: \"mt-3  text-end\",\n                children: writerName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                style: {\n                  color: \"grey\",\n                  fontSize: \"0.8em\"\n                },\n                className: \"mt-2\",\n                children: writerDescription\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Subtitle, {\n              className: \"mb-3\",\n              children: [commentList.length, \"\\uAC1C\\uC758 \\uB313\\uAE00\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              placeholder: \"\\uB313\\uAE00\\uC744 \\uC791\\uC131\\uD558\\uC138\\uC694.\",\n              as: \"textarea\",\n              rows: 3,\n              value: commentSaveContent,\n              onChange: onChangeSaveComment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              className: \"p-0\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"mt-3\",\n                variant: \"primary\",\n                onClick: () => handleSubmit(wanted.userId),\n                children: \"\\uB313\\uAE00 \\uC791\\uC131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: commentList.map(comment => {\n            var _userState$user$_id2;\n\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                xs: \"auto\",\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Card.Img, {\n                    style: {\n                      width: \"5rem\",\n                      height: \"5rem\",\n                      borderRadius: \"70%\",\n                      overflow: \"hidden\"\n                    },\n                    className: \"mb-3\",\n                    src: comment.userImageUri ? comment.userImageUri : \"http://placekitten.com/200/200\",\n                    alt: \"\\uB313\\uAE00 \\uC791\\uC131\\uC790\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [/*#__PURE__*/_jsxDEV(Row, {\n                    className: \"mt-3\",\n                    children: comment.userName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Row, {\n                    style: {\n                      color: \"grey\",\n                      fontSize: \"0.8em\"\n                    },\n                    className: \"mt-2\",\n                    children: /*#__PURE__*/_jsxDEV(CommentToRelative, {\n                      date: comment.createdAt\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), comment.isEdit === true ? /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  xs: 9,\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    placeholder: \"\\uB313\\uAE00\\uC744 \\uC791\\uC131\\uD558\\uC138\\uC694.\",\n                    as: \"textarea\",\n                    rows: 2,\n                    value: commentContent,\n                    onChange: onChangeComment\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  xs: 3,\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    className: \"me-3\",\n                    variant: \"primary\",\n                    onClick: () => handleCommentEditSubmit(comment._id),\n                    children: \"\\uD655\\uC778\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    className: \"me-3\",\n                    variant: \"danger\",\n                    onClick: () => handleCommentEditRemove(comment._id),\n                    children: \"\\uC0AD\\uC81C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"secondary\",\n                    onClick: () => handleCancel(comment._id),\n                    children: \"\\uCDE8\\uC18C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  xs: 6,\n                  children: comment.commentContent\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  xs: 6,\n                  className: \"mb-3 text-end\",\n                  children: ((_userState$user$_id2 = userState.user._id) !== null && _userState$user$_id2 !== void 0 ? _userState$user$_id2 : userState.user.id) === comment.userId && /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"primary\",\n                    className: \"me-3\",\n                    onClick: () => handleCommentEdit(comment._id),\n                    children: \"\\uB313\\uAE00 \\uC218\\uC815\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 17\n              }, this)]\n            }, comment._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n}\n\n_s(WantedUpdate, \"96ipcTvv7NDa5OEtyyKqrq+h0Uo=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c2 = WantedUpdate;\nexport default WantedUpdate;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CommentToRelative\");\n$RefreshReg$(_c2, \"WantedUpdate\");","map":{"version":3,"sources":["/Users/luna/Documents/Elice_1st_Project/portfolio-share-service-racer/front/src/pages/wanted/WantedRead.js"],"names":["React","useEffect","useContext","useState","useCallback","useNavigate","useLocation","Container","Row","Col","Card","Form","Button","Api","UserStateContext","DateTime","CommentToRelative","date","preDate","Date","luxonDate","fromJSDate","toRelative","WantedUpdate","navigate","commentSaveContent","setCommentSaveContent","commentContent","setCommentContent","writerName","setWriterName","writerDescription","setWriterDescription","writerImage","setWriterImage","commentList","setCommentList","isSave","setIsSave","userState","state","wanted","isWantedEditable","user","_id","id","userId","onChangeSaveComment","e","target","value","onChangeComment","fetchWriterInfo","res","get","writerInfo","data","userInfo","name","description","userImage","imageUri","err","response","status","alert","error","console","log","fetchCommentList","handleSubmit","post","handleCommentEdit","prevComments","map","comment","isEdit","filter","handleCommentEditSubmit","put","handleCommentEditRemove","delete","handleCancel","dateTime","dateStr","year","getFullYear","month","String","getMonth","padStart","day","getDate","timeString","toLocaleTimeString","wantedTitle","createdAt","wantedContent","width","height","borderRadius","overflow","color","fontSize","length","userImageUri","userName"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useContext, useState, useCallback } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { Container, Row, Col, Card, Form, Button } from \"react-bootstrap\";\n\nimport * as Api from \"../../api\";\nimport { UserStateContext } from \"../../App\";\n\nimport { DateTime } from \"luxon\";\n\nconst CommentToRelative = ({ date }) => {\n  const preDate = new Date(date);\n  const luxonDate = DateTime.fromJSDate(preDate);\n  return <>{luxonDate.toRelative()}</>;\n};\n\nfunction WantedUpdate() {\n  const navigate = useNavigate();\n  const [commentSaveContent, setCommentSaveContent] = useState(\"\");\n  const [commentContent, setCommentContent] = useState(\"\");\n  const [writerName, setWriterName] = useState(\"\");\n  const [writerDescription, setWriterDescription] = useState(\"\");\n  const [writerImage, setWriterImage] = useState(\"\");\n  const [commentList, setCommentList] = useState([]);\n  const [isSave, setIsSave] = useState(false);\n\n  const userState = useContext(UserStateContext);\n  const { state } = useLocation();\n  const { wanted } = state;\n\n  const isWantedEditable = (userState.user._id ?? userState.user.id) === wanted.userId;\n\n  const onChangeSaveComment = (e) => {\n    setCommentSaveContent(e.target.value);\n  };\n\n  const onChangeComment = (e) => {\n    setCommentContent(e.target.value);\n  };\n\n  const fetchWriterInfo = useCallback(async () => {\n    try {\n      const userId = wanted.userId;\n      // \"/user/user_id\" 엔드포인트로 get요청함.(userId는 req.currentUserId 사용)\n      const res = await Api.get(`user/${userId}`);\n      const writerInfo = res.data.userInfo;\n\n      setWriterName(writerInfo.name);\n      setWriterDescription(writerInfo.description);\n\n      if (!writerInfo.userImage) {\n        setWriterImage(\"http://placekitten.com/200/200\");\n      } else {\n        setWriterImage(writerInfo.userImage.imageUri);\n      }\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log(\"작성자 불러오기에 실패하였습니다.\", err);\n    }\n  }, [wanted.userId]);\n\n  const fetchCommentList = useCallback(async () => {\n    try {\n      const res = await Api.get(`comment/${wanted._id}`);\n      setCommentList(res.data);\n      setIsSave(false);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n    }\n  }, [wanted._id, isSave]);\n\n  const handleSubmit = async () => {\n    try {\n      // \"comment/wantedId\" 엔드포인트로 post요청함.\n      await Api.post(`comment/${wanted._id}`, {\n        commentSaveContent,\n      });\n\n      setCommentSaveContent(\"\");\n\n      setIsSave(true);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log(\"댓글 추가에 실패하였습니다.\", err);\n    }\n  };\n\n  const handleCommentEdit = (id) => {\n    setCommentList((prevComments) => {\n      return prevComments.map((comment) => {\n        if (comment._id === id) {\n          return {\n            ...comment,\n            isEdit: true,\n          };\n        } else {\n          return comment;\n        }\n      });\n    });\n    const comment = commentList.filter((comment) => comment._id === id)[0];\n    setCommentContent(comment.commentContent);\n  };\n\n  const handleCommentEditSubmit = async (id) => {\n    try {\n      // \"comment/commentId\" 엔드포인트로 put요청함.\n      await Api.put(`comment/${id}`, {\n        commentContent,\n      });\n\n      setCommentContent(\"\");\n\n      setIsSave(true);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log(\"댓글수정에 실패하였습니다.\");\n    }\n  };\n\n  const handleCommentEditRemove = async (id) => {\n    try {\n      // \"comment/commentId\" 엔드포인트로 delete요청함.\n      await Api.delete(`comment/${id}`);\n\n      setCommentContent(\"\");\n\n      setIsSave(true);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log(\"댓글삭제에 실패하였습니다.\");\n    }\n  };\n\n  const handleCancel = (id) => {\n    setCommentList((prevComments) => {\n      return prevComments.map((comment) => {\n        if (comment._id === id) {\n          return {\n            ...comment,\n            isEdit: false,\n          };\n        } else {\n          return comment;\n        }\n      });\n    });\n  };\n\n  //작성일자, 시간의 표현값을 변환해주는 함수\n  function dateTime(dateStr) {\n    const date = new Date(dateStr);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, \"0\");\n    const day = String(date.getDate()).padStart(2, \"0\");\n    const timeString = date.toLocaleTimeString();\n\n    return `${year}-${month}-${day} ${timeString}`;\n  }\n\n  useEffect(() => {\n    // 만약 전역 상태의 user가 null이라면, 로그인 페이지로 이동함.\n    if (!userState.user) {\n      navigate(\"/login\");\n      return;\n    }\n\n    fetchWriterInfo();\n    fetchCommentList();\n  }, [userState, navigate, fetchWriterInfo, fetchCommentList]);\n\n  return (\n    <Container>\n      <Row xs=\"auto\">\n        <Col xs={6} className=\"text-left\">\n          <h3>팀원 구하기</h3>\n          <p>\n            팀원 모집을 확인하고 프로젝트에 참여해보세요.\n            <br />\n            원하는 프로젝트가 없을 경우 직접 팀원을 모집할 수 있어요.\n          </p>\n        </Col>\n        <Col xs={6} className=\"mb-3 text-end\">\n          {isWantedEditable && (\n            <Button\n              className=\"me-3\"\n              variant=\"primary\"\n              onClick={() => navigate(\"/wanted/update\", { state: { wanted: wanted } })}\n            >\n              수정하기\n            </Button>\n          )}\n          <Button className=\"me-3\" variant=\"primary\" onClick={() => navigate(\"/wanted\")}>\n            목록으로\n          </Button>\n        </Col>\n      </Row>\n      <Row>\n        <Card className=\"mb-3\">\n          <Card.Body>\n            <Card.Title>{wanted.wantedTitle}</Card.Title>\n            <Card.Subtitle>\n              작성자 : {writerName} &nbsp;&nbsp;&nbsp;&nbsp; 작성일시 : {dateTime(wanted.createdAt)}\n            </Card.Subtitle>\n            <hr />\n          </Card.Body>\n          <Card.Body>\n            <Card.Text>{wanted.wantedContent}</Card.Text>\n          </Card.Body>\n          <Card.Body>\n            <Row xs=\"auto\">\n              <Col>\n                <Card.Img\n                  style={{ width: \"5rem\", height: \"5rem\", borderRadius: \"70%\", overflow: \"hidden\" }}\n                  className=\"mb-3\"\n                  src={writerImage}\n                  alt=\"페이지 작성자\"\n                />\n              </Col>\n              <Col>\n                <Row className=\"mt-3  text-end\">{writerName}</Row>\n                <Row style={{ color: \"grey\", fontSize: \"0.8em\" }} className=\"mt-2\">\n                  {writerDescription}\n                </Row>\n              </Col>\n            </Row>\n            <Row>\n              <Card.Subtitle className=\"mb-3\">{commentList.length}개의 댓글</Card.Subtitle>\n              <Form.Control\n                placeholder=\"댓글을 작성하세요.\"\n                as=\"textarea\"\n                rows={3}\n                value={commentSaveContent}\n                onChange={onChangeSaveComment}\n              />\n            </Row>\n            <Row>\n              <Col className=\"p-0\">\n                <Button className=\"mt-3\" variant=\"primary\" onClick={() => handleSubmit(wanted.userId)}>\n                  댓글 작성\n                </Button>\n              </Col>\n            </Row>\n          </Card.Body>\n          <Card.Body>\n            {commentList.map((comment) => (\n              <div key={comment._id}>\n                <Row xs=\"auto\">\n                  <Col>\n                    <Card.Img\n                      style={{ width: \"5rem\", height: \"5rem\", borderRadius: \"70%\", overflow: \"hidden\" }}\n                      className=\"mb-3\"\n                      src={comment.userImageUri ? comment.userImageUri : \"http://placekitten.com/200/200\"}\n                      alt=\"댓글 작성자\"\n                    />\n                  </Col>\n                  <Col>\n                    <Row className=\"mt-3\">{comment.userName}</Row>\n                    <Row style={{ color: \"grey\", fontSize: \"0.8em\" }} className=\"mt-2\">\n                      <CommentToRelative date={comment.createdAt} />\n                    </Row>\n                  </Col>\n                </Row>\n\n                {comment.isEdit === true ? (\n                  <Row>\n                    <Col xs={9}>\n                      <Form.Control\n                        placeholder=\"댓글을 작성하세요.\"\n                        as=\"textarea\"\n                        rows={2}\n                        value={commentContent}\n                        onChange={onChangeComment}\n                      />\n                    </Col>\n                    <Col xs={3}>\n                      <Button className=\"me-3\" variant=\"primary\" onClick={() => handleCommentEditSubmit(comment._id)}>\n                        확인\n                      </Button>\n                      <Button className=\"me-3\" variant=\"danger\" onClick={() => handleCommentEditRemove(comment._id)}>\n                        삭제\n                      </Button>\n                      <Button variant=\"secondary\" onClick={() => handleCancel(comment._id)}>\n                        취소\n                      </Button>\n                    </Col>\n                  </Row>\n                ) : (\n                  <Row>\n                    <Col xs={6}>{comment.commentContent}</Col>\n                    <Col xs={6} className=\"mb-3 text-end\">\n                      {(userState.user._id ?? userState.user.id) === comment.userId && (\n                        <Button variant=\"primary\" className=\"me-3\" onClick={() => handleCommentEdit(comment._id)}>\n                          댓글 수정\n                        </Button>\n                      )}\n                    </Col>\n                  </Row>\n                )}\n\n                <hr />\n              </div>\n            ))}\n          </Card.Body>\n        </Card>\n      </Row>\n    </Container>\n  );\n}\n\nexport default WantedUpdate;\n"]},"metadata":{},"sourceType":"module"}