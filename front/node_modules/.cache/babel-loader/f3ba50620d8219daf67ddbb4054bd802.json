{"ast":null,"code":"var _jsxFileName = \"/Users/luna/Documents/Elice_1st_Project/my_test/front/src/pages/wanted/WantedRead.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Container, Row, Col, Card, Form, Button } from 'react-bootstrap';\nimport * as Api from '../../api';\nimport { UserStateContext } from '../../App';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction WantedUpdate() {\n  _s();\n\n  const navigate = useNavigate();\n  const [commentContent, setCommentContent] = useState('');\n  const [writerName, setWriterName] = useState('');\n  const [writerDescription, setWriterDescription] = useState('');\n  const [writerImage, setWriterImage] = useState('');\n  const [commentList, setCommentList] = useState([]);\n  const [isSave, setIsSave] = useState(false);\n  const userState = useContext(UserStateContext);\n  const {\n    state\n  } = useLocation();\n  const {\n    wanted\n  } = state;\n\n  const onChangeComment = e => {\n    setCommentContent(e.target.value);\n  };\n\n  const standardDate = moment(wanted.createdAt);\n  const checkDate = moment('2023-05-03T06:09:31.970Z');\n  const dayDiff = standardDate.diff(checkDate, 'days');\n  const hourDiff = standardDate.diff(checkDate, 'hours');\n  const minuteDiff = standardDate.diff(checkDate, 'minutes');\n\n  if (dayDiff === 0 && hourDiff === 0) {\n    // 작성한지 1시간도 안지났을때\n    const minutes = Math.ceil(-minuteDiff);\n    return minutes + '분 전'; // '분' 로 표시\n  }\n\n  if (dayDiff === 0 && hourDiff <= 24) {\n    // 작성한지 1시간은 넘었지만 하루는 안지났을때,\n    const hour = Math.ceil(-hourDiff);\n    return hour + '시간 전'; // '시간'으로 표시\n  }\n\n  return -dayDiff + '일 전';\n\n  const fetchWriterInfo = async () => {\n    try {\n      const userId = wanted.userId; // \"/user/user_id\" 엔드포인트로 get요청함.(userId는 req.currentUserId 사용)\n\n      const res = await Api.get(`user/${userId}`);\n      const writerInfo = res.data.userInfo;\n      setWriterName(writerInfo.name);\n      setWriterDescription(writerInfo.description);\n\n      if (!writerInfo.userImage) {\n        setWriterImage('http://placekitten.com/200/200');\n      } else {\n        setWriterImage(writerInfo.userImage.imageUri);\n      }\n    } catch (err) {\n      console.log('작성자 불러오기에 실패하였습니다.', err);\n    }\n  };\n\n  const fetchCommentList = async () => {\n    try {\n      await Api.get(`comment/${wanted._id}`).then(res => setCommentList(res.data));\n      setIsSave(false);\n    } catch (err) {\n      console.log('');\n    }\n  };\n\n  const handelSubmit = async () => {\n    try {\n      // \"comment/wantedId\" 엔드포인트로 post요청함.\n      await Api.post(`comment/${wanted._id}`, {\n        commentContent\n      });\n      setCommentContent('');\n      setIsSave(true);\n    } catch (err) {\n      console.log('댓글 추가에 실패하였습니다.', err);\n    }\n  };\n\n  useEffect(() => {\n    // 만약 전역 상태의 user가 null이라면, 로그인 페이지로 이동함.\n    if (!userState.user) {\n      navigate('/login');\n      return;\n    }\n\n    fetchWriterInfo();\n    fetchCommentList();\n  }, [userState, navigate, isSave]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        xs: 8,\n        className: \"text-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD300\\uC6D0 \\uAD6C\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD300\\uC6D0 \\uBAA8\\uC9D1\\uC744 \\uD655\\uC778\\uD558\\uACE0 \\uD504\\uB85C\\uC81D\\uD2B8\\uC5D0 \\uCC38\\uC5EC\\uD574\\uBCF4\\uC138\\uC694.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), \"\\uC6D0\\uD558\\uB294 \\uD504\\uB85C\\uC81D\\uD2B8\\uAC00 \\uC5C6\\uC744 \\uACBD\\uC6B0 \\uC9C1\\uC811 \\uD300\\uC6D0\\uC744 \\uBAA8\\uC9D1\\uD560 \\uC218 \\uC788\\uC5B4\\uC694.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"position-relative\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"m-3 position-absolute bottom-0 end-0\",\n          variant: \"primary\",\n          onClick: () => navigate('/wanted'),\n          children: \"\\uBAA9\\uB85D\\uC73C\\uB85C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n            children: wanted.wantedTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n            children: [\"\\uC791\\uC131\\uC790 : \", writerName, \" \\xA0\\xA0\\xA0\\xA0 \\uC791\\uC131\\uC77C\\uC2DC : \", wanted.createdAt]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: /*#__PURE__*/_jsxDEV(Card.Text, {\n            children: wanted.wantedContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: 1,\n              children: /*#__PURE__*/_jsxDEV(Card.Img, {\n                style: {\n                  width: '5rem',\n                  height: '5rem',\n                  borderRadius: '70%',\n                  overflow: 'hidden'\n                },\n                className: \"mb-3\",\n                src: writerImage,\n                alt: \"\\uD398\\uC774\\uC9C0 \\uC791\\uC131\\uC790\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                className: \"mt-3\",\n                children: writerName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                style: {\n                  color: 'grey',\n                  fontSize: '0.8em'\n                },\n                className: \"mt-2\",\n                children: writerDescription\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Subtitle, {\n              className: \"mb-3\",\n              children: \"13\\uAC1C\\uC758 \\uB313\\uAE00\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              placeholder: \"\\uB313\\uAE00\\uC744 \\uC791\\uC131\\uD558\\uC138\\uC694.\",\n              as: \"textarea\",\n              rows: 3,\n              value: commentContent,\n              onChange: onChangeComment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              className: \"p-0\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"mt-3\",\n                variant: \"primary\",\n                onClick: handelSubmit,\n                children: \"\\uB313\\uAE00 \\uC791\\uC131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: commentList.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Row, {\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                xs: 1,\n                children: /*#__PURE__*/_jsxDEV(Card.Img, {\n                  style: {\n                    width: '5rem',\n                    height: '5rem',\n                    borderRadius: '70%',\n                    overflow: 'hidden'\n                  },\n                  className: \"mb-3\",\n                  src: comment.userImageUri ? comment.userImageUri : 'http://placekitten.com/200/200',\n                  alt: \"\\uB313\\uAE00 \\uC791\\uC131\\uC790\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                children: [/*#__PURE__*/_jsxDEV(Row, {\n                  className: \"mt-3\",\n                  children: comment.userName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Row, {\n                  style: {\n                    color: 'grey',\n                    fontSize: '0.8em'\n                  },\n                  className: \"mt-2\",\n                  children: comment.createdAt\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                children: comment.commentContent\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 33\n            }, this)]\n          }, comment._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n}\n\n_s(WantedUpdate, \"f0+7CYuZ6seXQA3L+oCQ4/eTqXU=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = WantedUpdate;\nexport default WantedUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"WantedUpdate\");","map":{"version":3,"sources":["/Users/luna/Documents/Elice_1st_Project/my_test/front/src/pages/wanted/WantedRead.js"],"names":["React","useEffect","useContext","useState","useNavigate","useLocation","Container","Row","Col","Card","Form","Button","Api","UserStateContext","moment","WantedUpdate","navigate","commentContent","setCommentContent","writerName","setWriterName","writerDescription","setWriterDescription","writerImage","setWriterImage","commentList","setCommentList","isSave","setIsSave","userState","state","wanted","onChangeComment","e","target","value","standardDate","createdAt","checkDate","dayDiff","diff","hourDiff","minuteDiff","minutes","Math","ceil","hour","fetchWriterInfo","userId","res","get","writerInfo","data","userInfo","name","description","userImage","imageUri","err","console","log","fetchCommentList","_id","then","handelSubmit","post","user","wantedTitle","wantedContent","width","height","borderRadius","overflow","color","fontSize","map","comment","userImageUri","userName"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,kBAAzC;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoCC,IAApC,EAA0CC,MAA1C,QAAwD,iBAAxD;AAEA,OAAO,KAAKC,GAAZ,MAAqB,WAArB;AACA,SAASC,gBAAT,QAAiC,WAAjC;AAEA,OAAOC,MAAP,MAAmB,QAAnB;;;AAEA,SAASC,YAAT,GAAwB;AAAA;;AACpB,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AACA,QAAM,CAACa,cAAD,EAAiBC,iBAAjB,IAAsCf,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACgB,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACkB,iBAAD,EAAoBC,oBAApB,IAA4CnB,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAACoB,WAAD,EAAcC,cAAd,IAAgCrB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACsB,WAAD,EAAcC,cAAd,IAAgCvB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACwB,MAAD,EAASC,SAAT,IAAsBzB,QAAQ,CAAC,KAAD,CAApC;AAEA,QAAM0B,SAAS,GAAG3B,UAAU,CAACW,gBAAD,CAA5B;AACA,QAAM;AAAEiB,IAAAA;AAAF,MAAYzB,WAAW,EAA7B;AACA,QAAM;AAAE0B,IAAAA;AAAF,MAAaD,KAAnB;;AAEA,QAAME,eAAe,GAAIC,CAAD,IAAO;AAC3Bf,IAAAA,iBAAiB,CAACe,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB;AACH,GAFD;;AAIA,QAAMC,YAAY,GAAGtB,MAAM,CAACiB,MAAM,CAACM,SAAR,CAA3B;AACA,QAAMC,SAAS,GAAGxB,MAAM,CAAC,0BAAD,CAAxB;AACA,QAAMyB,OAAO,GAAGH,YAAY,CAACI,IAAb,CAAkBF,SAAlB,EAA6B,MAA7B,CAAhB;AACA,QAAMG,QAAQ,GAAGL,YAAY,CAACI,IAAb,CAAkBF,SAAlB,EAA6B,OAA7B,CAAjB;AACA,QAAMI,UAAU,GAAGN,YAAY,CAACI,IAAb,CAAkBF,SAAlB,EAA6B,SAA7B,CAAnB;;AAEA,MAAIC,OAAO,KAAK,CAAZ,IAAiBE,QAAQ,KAAK,CAAlC,EAAqC;AACjC;AACA,UAAME,OAAO,GAAGC,IAAI,CAACC,IAAL,CAAU,CAACH,UAAX,CAAhB;AACA,WAAOC,OAAO,GAAG,KAAjB,CAHiC,CAGT;AAC3B;;AAED,MAAIJ,OAAO,KAAK,CAAZ,IAAiBE,QAAQ,IAAI,EAAjC,EAAqC;AACjC;AACA,UAAMK,IAAI,GAAGF,IAAI,CAACC,IAAL,CAAU,CAACJ,QAAX,CAAb;AACA,WAAOK,IAAI,GAAG,MAAd,CAHiC,CAGX;AACzB;;AAED,SAAO,CAACP,OAAD,GAAW,KAAlB;;AAEA,QAAMQ,eAAe,GAAG,YAAY;AAChC,QAAI;AACA,YAAMC,MAAM,GAAGjB,MAAM,CAACiB,MAAtB,CADA,CAEA;;AACA,YAAMC,GAAG,GAAG,MAAMrC,GAAG,CAACsC,GAAJ,CAAS,QAAOF,MAAO,EAAvB,CAAlB;AACA,YAAMG,UAAU,GAAGF,GAAG,CAACG,IAAJ,CAASC,QAA5B;AAEAjC,MAAAA,aAAa,CAAC+B,UAAU,CAACG,IAAZ,CAAb;AACAhC,MAAAA,oBAAoB,CAAC6B,UAAU,CAACI,WAAZ,CAApB;;AAEA,UAAI,CAACJ,UAAU,CAACK,SAAhB,EAA2B;AACvBhC,QAAAA,cAAc,CAAC,gCAAD,CAAd;AACH,OAFD,MAEO;AACHA,QAAAA,cAAc,CAAC2B,UAAU,CAACK,SAAX,CAAqBC,QAAtB,CAAd;AACH;AACJ,KAdD,CAcE,OAAOC,GAAP,EAAY;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC;AACH;AACJ,GAlBD;;AAoBA,QAAMG,gBAAgB,GAAG,YAAY;AACjC,QAAI;AACA,YAAMjD,GAAG,CAACsC,GAAJ,CAAS,WAAUnB,MAAM,CAAC+B,GAAI,EAA9B,EAAiCC,IAAjC,CAAuCd,GAAD,IAASvB,cAAc,CAACuB,GAAG,CAACG,IAAL,CAA7D,CAAN;AACAxB,MAAAA,SAAS,CAAC,KAAD,CAAT;AACH,KAHD,CAGE,OAAO8B,GAAP,EAAY;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACH;AACJ,GAPD;;AASA,QAAMI,YAAY,GAAG,YAAY;AAC7B,QAAI;AACA;AACA,YAAMpD,GAAG,CAACqD,IAAJ,CAAU,WAAUlC,MAAM,CAAC+B,GAAI,EAA/B,EAAkC;AACpC7C,QAAAA;AADoC,OAAlC,CAAN;AAIAC,MAAAA,iBAAiB,CAAC,EAAD,CAAjB;AAEAU,MAAAA,SAAS,CAAC,IAAD,CAAT;AACH,KATD,CASE,OAAO8B,GAAP,EAAY;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,GAA/B;AACH;AACJ,GAbD;;AAeAzD,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA,QAAI,CAAC4B,SAAS,CAACqC,IAAf,EAAqB;AACjBlD,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACA;AACH;;AAED+B,IAAAA,eAAe;AACfc,IAAAA,gBAAgB;AACnB,GATQ,EASN,CAAChC,SAAD,EAAYb,QAAZ,EAAsBW,MAAtB,CATM,CAAT;AAWA,sBACI,QAAC,SAAD;AAAA,4BACI,QAAC,GAAD;AAAA,8BACI,QAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAY,QAAA,SAAS,EAAC,WAAtB;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAA,mKAEI;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eASI,QAAC,GAAD;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA,+BACI,QAAC,MAAD;AACI,UAAA,SAAS,EAAC,sCADd;AAEI,UAAA,OAAO,EAAC,SAFZ;AAGI,UAAA,OAAO,EAAE,MAAMX,QAAQ,CAAC,SAAD,CAH3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cATJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAmBI,QAAC,GAAD;AAAA,6BACI,QAAC,IAAD;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA,gCACI,QAAC,IAAD,CAAM,IAAN;AAAA,kCACI,QAAC,IAAD,CAAM,KAAN;AAAA,sBAAae,MAAM,CAACoC;AAApB;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,IAAD,CAAM,QAAN;AAAA,gDACWhD,UADX,mDACwDY,MAAM,CAACM,SAD/D;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAKI;AAAA;AAAA;AAAA;AAAA,kBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAQI,QAAC,IAAD,CAAM,IAAN;AAAA,iCACI,QAAC,IAAD,CAAM,IAAN;AAAA,sBAAYN,MAAM,CAACqC;AAAnB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBARJ,eAWI,QAAC,IAAD,CAAM,IAAN;AAAA,kCACI,QAAC,GAAD;AAAA,oCACI,QAAC,GAAD;AAAK,cAAA,EAAE,EAAE,CAAT;AAAA,qCACI,QAAC,IAAD,CAAM,GAAN;AACI,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,KAAK,EAAE,MAAT;AAAiBC,kBAAAA,MAAM,EAAE,MAAzB;AAAiCC,kBAAAA,YAAY,EAAE,KAA/C;AAAsDC,kBAAAA,QAAQ,EAAE;AAAhE,iBADX;AAEI,gBAAA,SAAS,EAAC,MAFd;AAGI,gBAAA,GAAG,EAAEjD,WAHT;AAII,gBAAA,GAAG,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBADJ,eASI,QAAC,GAAD;AAAA,sCACI,QAAC,GAAD;AAAK,gBAAA,SAAS,EAAC,MAAf;AAAA,0BAAuBJ;AAAvB;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI,QAAC,GAAD;AAAK,gBAAA,KAAK,EAAE;AAAEsD,kBAAAA,KAAK,EAAE,MAAT;AAAiBC,kBAAAA,QAAQ,EAAE;AAA3B,iBAAZ;AAAkD,gBAAA,SAAS,EAAC,MAA5D;AAAA,0BACKrD;AADL;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAiBI,QAAC,GAAD;AAAA,oCACI,QAAC,IAAD,CAAM,QAAN;AAAe,cAAA,SAAS,EAAC,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,IAAD,CAAM,OAAN;AACI,cAAA,WAAW,EAAC,oDADhB;AAEI,cAAA,EAAE,EAAC,UAFP;AAGI,cAAA,IAAI,EAAE,CAHV;AAII,cAAA,KAAK,EAAEJ,cAJX;AAKI,cAAA,QAAQ,EAAEe;AALd;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAjBJ,eA2BI,QAAC,GAAD;AAAA,mCACI,QAAC,GAAD;AAAK,cAAA,SAAS,EAAC,KAAf;AAAA,qCACI,QAAC,MAAD;AAAQ,gBAAA,SAAS,EAAC,MAAlB;AAAyB,gBAAA,OAAO,EAAC,SAAjC;AAA2C,gBAAA,OAAO,EAAEgC,YAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBA3BJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXJ,eA8CI,QAAC,IAAD,CAAM,IAAN;AAAA,oBACKvC,WAAW,CAACkD,GAAZ,CAAiBC,OAAD,iBACb;AAAA,oCACI,QAAC,GAAD;AAAA,sCACI,QAAC,GAAD;AAAK,gBAAA,EAAE,EAAE,CAAT;AAAA,uCACI,QAAC,IAAD,CAAM,GAAN;AACI,kBAAA,KAAK,EAAE;AAAEP,oBAAAA,KAAK,EAAE,MAAT;AAAiBC,oBAAAA,MAAM,EAAE,MAAzB;AAAiCC,oBAAAA,YAAY,EAAE,KAA/C;AAAsDC,oBAAAA,QAAQ,EAAE;AAAhE,mBADX;AAEI,kBAAA,SAAS,EAAC,MAFd;AAGI,kBAAA,GAAG,EAAEI,OAAO,CAACC,YAAR,GAAuBD,OAAO,CAACC,YAA/B,GAA8C,gCAHvD;AAII,kBAAA,GAAG,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBADJ,eASI,QAAC,GAAD;AAAA,wCACI,QAAC,GAAD;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,4BAAuBD,OAAO,CAACE;AAA/B;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI,QAAC,GAAD;AAAK,kBAAA,KAAK,EAAE;AAAEL,oBAAAA,KAAK,EAAE,MAAT;AAAiBC,oBAAAA,QAAQ,EAAE;AAA3B,mBAAZ;AAAkD,kBAAA,SAAS,EAAC,MAA5D;AAAA,4BACKE,OAAO,CAACvC;AADb;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAiBI,QAAC,GAAD;AAAA,qCACI,QAAC,GAAD;AAAA,0BAAMuC,OAAO,CAAC3D;AAAd;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAjBJ,eAoBI;AAAA;AAAA;AAAA;AAAA,oBApBJ;AAAA,aAAU2D,OAAO,CAACd,GAAlB;AAAA;AAAA;AAAA;AAAA,kBADH;AADL;AAAA;AAAA;AAAA;AAAA,gBA9CJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAnBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAiGH;;GA7LQ/C,Y;UACYX,W,EASCC,W;;;KAVbU,Y;AA+LT,eAAeA,YAAf","sourcesContent":["import React, { useEffect, useContext, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Container, Row, Col, Card, Form, Button } from 'react-bootstrap';\n\nimport * as Api from '../../api';\nimport { UserStateContext } from '../../App';\n\nimport moment from 'moment';\n\nfunction WantedUpdate() {\n    const navigate = useNavigate();\n    const [commentContent, setCommentContent] = useState('');\n    const [writerName, setWriterName] = useState('');\n    const [writerDescription, setWriterDescription] = useState('');\n    const [writerImage, setWriterImage] = useState('');\n    const [commentList, setCommentList] = useState([]);\n    const [isSave, setIsSave] = useState(false);\n\n    const userState = useContext(UserStateContext);\n    const { state } = useLocation();\n    const { wanted } = state;\n\n    const onChangeComment = (e) => {\n        setCommentContent(e.target.value);\n    };\n\n    const standardDate = moment(wanted.createdAt);\n    const checkDate = moment('2023-05-03T06:09:31.970Z');\n    const dayDiff = standardDate.diff(checkDate, 'days');\n    const hourDiff = standardDate.diff(checkDate, 'hours');\n    const minuteDiff = standardDate.diff(checkDate, 'minutes');\n\n    if (dayDiff === 0 && hourDiff === 0) {\n        // 작성한지 1시간도 안지났을때\n        const minutes = Math.ceil(-minuteDiff);\n        return minutes + '분 전'; // '분' 로 표시\n    }\n\n    if (dayDiff === 0 && hourDiff <= 24) {\n        // 작성한지 1시간은 넘었지만 하루는 안지났을때,\n        const hour = Math.ceil(-hourDiff);\n        return hour + '시간 전'; // '시간'으로 표시\n    }\n\n    return -dayDiff + '일 전';\n\n    const fetchWriterInfo = async () => {\n        try {\n            const userId = wanted.userId;\n            // \"/user/user_id\" 엔드포인트로 get요청함.(userId는 req.currentUserId 사용)\n            const res = await Api.get(`user/${userId}`);\n            const writerInfo = res.data.userInfo;\n\n            setWriterName(writerInfo.name);\n            setWriterDescription(writerInfo.description);\n\n            if (!writerInfo.userImage) {\n                setWriterImage('http://placekitten.com/200/200');\n            } else {\n                setWriterImage(writerInfo.userImage.imageUri);\n            }\n        } catch (err) {\n            console.log('작성자 불러오기에 실패하였습니다.', err);\n        }\n    };\n\n    const fetchCommentList = async () => {\n        try {\n            await Api.get(`comment/${wanted._id}`).then((res) => setCommentList(res.data));\n            setIsSave(false);\n        } catch (err) {\n            console.log('');\n        }\n    };\n\n    const handelSubmit = async () => {\n        try {\n            // \"comment/wantedId\" 엔드포인트로 post요청함.\n            await Api.post(`comment/${wanted._id}`, {\n                commentContent,\n            });\n\n            setCommentContent('');\n\n            setIsSave(true);\n        } catch (err) {\n            console.log('댓글 추가에 실패하였습니다.', err);\n        }\n    };\n\n    useEffect(() => {\n        // 만약 전역 상태의 user가 null이라면, 로그인 페이지로 이동함.\n        if (!userState.user) {\n            navigate('/login');\n            return;\n        }\n\n        fetchWriterInfo();\n        fetchCommentList();\n    }, [userState, navigate, isSave]);\n\n    return (\n        <Container>\n            <Row>\n                <Col xs={8} className='text-left'>\n                    <h3>팀원 구하기</h3>\n                    <p>\n                        팀원 모집을 확인하고 프로젝트에 참여해보세요.\n                        <br />\n                        원하는 프로젝트가 없을 경우 직접 팀원을 모집할 수 있어요.\n                    </p>\n                </Col>\n                <Col className='position-relative'>\n                    <Button\n                        className='m-3 position-absolute bottom-0 end-0'\n                        variant='primary'\n                        onClick={() => navigate('/wanted')}>\n                        목록으로\n                    </Button>\n                </Col>\n            </Row>\n            <Row>\n                <Card className='mb-3'>\n                    <Card.Body>\n                        <Card.Title>{wanted.wantedTitle}</Card.Title>\n                        <Card.Subtitle>\n                            작성자 : {writerName} &nbsp;&nbsp;&nbsp;&nbsp; 작성일시 : {wanted.createdAt}\n                        </Card.Subtitle>\n                        <hr />\n                    </Card.Body>\n                    <Card.Body>\n                        <Card.Text>{wanted.wantedContent}</Card.Text>\n                    </Card.Body>\n                    <Card.Body>\n                        <Row>\n                            <Col xs={1}>\n                                <Card.Img\n                                    style={{ width: '5rem', height: '5rem', borderRadius: '70%', overflow: 'hidden' }}\n                                    className='mb-3'\n                                    src={writerImage}\n                                    alt='페이지 작성자'\n                                />\n                            </Col>\n                            <Col>\n                                <Row className='mt-3'>{writerName}</Row>\n                                <Row style={{ color: 'grey', fontSize: '0.8em' }} className='mt-2'>\n                                    {writerDescription}\n                                </Row>\n                            </Col>\n                        </Row>\n                        <Row>\n                            <Card.Subtitle className='mb-3'>13개의 댓글</Card.Subtitle>\n                            <Form.Control\n                                placeholder='댓글을 작성하세요.'\n                                as='textarea'\n                                rows={3}\n                                value={commentContent}\n                                onChange={onChangeComment}\n                            />\n                        </Row>\n                        <Row>\n                            <Col className='p-0'>\n                                <Button className='mt-3' variant='primary' onClick={handelSubmit}>\n                                    댓글 작성\n                                </Button>\n                            </Col>\n                        </Row>\n                    </Card.Body>\n                    <Card.Body>\n                        {commentList.map((comment) => (\n                            <div key={comment._id}>\n                                <Row>\n                                    <Col xs={1}>\n                                        <Card.Img\n                                            style={{ width: '5rem', height: '5rem', borderRadius: '70%', overflow: 'hidden' }}\n                                            className='mb-3'\n                                            src={comment.userImageUri ? comment.userImageUri : 'http://placekitten.com/200/200'}\n                                            alt='댓글 작성자'\n                                        />\n                                    </Col>\n                                    <Col>\n                                        <Row className='mt-3'>{comment.userName}</Row>\n                                        <Row style={{ color: 'grey', fontSize: '0.8em' }} className='mt-2'>\n                                            {comment.createdAt}\n                                        </Row>\n                                    </Col>\n                                </Row>\n                                <Row>\n                                    <Col>{comment.commentContent}</Col>\n                                </Row>\n                                <hr />\n                            </div>\n                        ))}\n                    </Card.Body>\n                </Card>\n            </Row>\n        </Container>\n    );\n}\n\nexport default WantedUpdate;\n"]},"metadata":{},"sourceType":"module"}