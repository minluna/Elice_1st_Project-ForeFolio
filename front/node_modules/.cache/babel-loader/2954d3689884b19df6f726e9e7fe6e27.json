{"ast":null,"code":"var _jsxFileName = \"/Users/luna/Documents/Elice_1st_Project/portfolio-share-service-racer/front/src/pages/wanted/WantedRead.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useContext, useState, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Container, Row, Col, Card, Form, Button } from 'react-bootstrap';\nimport * as Api from '../../api';\nimport { UserStateContext } from '../../App';\nimport { DateTime } from 'luxon';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CommentToRelative = _ref => {\n  let {\n    date\n  } = _ref;\n  const preDate = new Date(date);\n  const luxonDate = DateTime.fromJSDate(preDate);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: luxonDate.toRelative()\n  }, void 0, false);\n};\n\n_c = CommentToRelative;\n\nfunction WantedUpdate() {\n  _s();\n\n  var _userState$user$_id;\n\n  const navigate = useNavigate();\n  const [commentSaveContent, setCommentSaveContent] = useState('');\n  const [commentContent, setCommentContent] = useState('');\n  const [writerName, setWriterName] = useState('');\n  const [writerEmail, setWriterEmail] = useState('');\n  const [writerImage, setWriterImage] = useState('');\n  const [writerDescription, setWriterDescription] = useState('');\n  const [commentList, setCommentList] = useState([]);\n  const [isSave, setIsSave] = useState(false);\n  const userState = useContext(UserStateContext);\n  const {\n    state\n  } = useLocation();\n  const {\n    wanted\n  } = state;\n  const isWantedEditable = ((_userState$user$_id = userState.user._id) !== null && _userState$user$_id !== void 0 ? _userState$user$_id : userState.user.id) === wanted.userId;\n\n  const onChangeSaveComment = e => {\n    setCommentSaveContent(e.target.value);\n  };\n\n  const onChangeComment = e => {\n    setCommentContent(e.target.value);\n  };\n\n  const fetchWriterInfo = useCallback(async () => {\n    try {\n      const userId = wanted.userId; // \"/user/user_id\" 엔드포인트로 get요청함.(userId는 req.currentUserId 사용)\n\n      const res = await Api.get(`user/${userId}`);\n      const writerInfo = res.data.userInfo;\n      console.log(writerInfo);\n      setWriterName(writerInfo.name);\n      setWriterEmail(writerInfo.email);\n      setWriterDescription(writerInfo.description);\n\n      if (!writerInfo.userImage) {\n        setWriterImage('http://placekitten.com/200/200');\n      } else {\n        setWriterImage(writerInfo.userImage.imageUri);\n      }\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log('작성자 불러오기에 실패하였습니다.', err);\n    }\n  }, [wanted.userId]);\n  const fetchCommentList = useCallback(async () => {\n    try {\n      const res = await Api.get(`comment/${wanted._id}`);\n      setCommentList(res.data);\n      setIsSave(false);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n    }\n  }, [wanted._id, isSave]);\n\n  const handleSubmit = async () => {\n    try {\n      // \"comment/wantedId\" 엔드포인트로 post요청함.\n      await Api.post(`comment/${wanted._id}`, {\n        commentSaveContent\n      });\n      setCommentSaveContent('');\n      setIsSave(true);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log('댓글 추가에 실패하였습니다.', err);\n    }\n  };\n\n  const handleCommentEdit = id => {\n    setCommentList(prevComments => {\n      return prevComments.map(comment => {\n        if (comment._id === id) {\n          return { ...comment,\n            isEdit: true\n          };\n        } else {\n          return comment;\n        }\n      });\n    });\n    const comment = commentList.filter(comment => comment._id === id)[0];\n    setCommentContent(comment.commentContent);\n  };\n\n  const handleCommentEditSubmit = async id => {\n    try {\n      // \"comment/commentId\" 엔드포인트로 put요청함.\n      await Api.put(`comment/${id}`, {\n        commentContent\n      });\n      setCommentContent('');\n      setIsSave(true);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log('댓글수정에 실패하였습니다.');\n    }\n  };\n\n  const handleCommentEditRemove = async id => {\n    try {\n      // \"comment/commentId\" 엔드포인트로 delete요청함.\n      await Api.delete(`comment/${id}`);\n      setCommentContent('');\n      setIsSave(true);\n    } catch (err) {\n      if (err.response.status === 400) {\n        alert(err.response.data.error);\n      }\n\n      console.log('댓글삭제에 실패하였습니다.');\n    }\n  };\n\n  const handleCancel = id => {\n    setCommentList(prevComments => {\n      return prevComments.map(comment => {\n        if (comment._id === id) {\n          return { ...comment,\n            isEdit: false\n          };\n        } else {\n          return comment;\n        }\n      });\n    });\n  }; //작성일자, 시간의 표현값을 변환해주는 함수\n\n\n  function dateTime(dateStr) {\n    const date = new Date(dateStr);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    const timeString = date.toLocaleTimeString();\n    return `${year}-${month}-${day} ${timeString}`;\n  } //페이지 경로에 따라 배경색이 달라짐\n\n\n  useEffect(() => {\n    const {\n      pathname\n    } = window.location;\n\n    if (pathname.startsWith('/user') || pathname === '/network' || pathname === '/wanted/read' || pathname === '/') {\n      document.body.classList.add('portfolio');\n    } else {\n      document.body.classList.remove('portfolio');\n    } // cleanup 함수\n\n\n    return () => {\n      document.body.classList.remove('portfolio');\n    };\n  }, []);\n  useEffect(() => {\n    // 만약 전역 상태의 user가 null이라면, 로그인 페이지로 이동함.\n    if (!userState.user) {\n      navigate('/login');\n      return;\n    }\n\n    fetchWriterInfo();\n    fetchCommentList();\n  }, [userState, navigate, fetchWriterInfo, fetchCommentList]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      xs: \"auto\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        xs: 12,\n        className: \"text-left text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-5\",\n          style: {\n            color: '#2a3741',\n            fontWeight: '800'\n          },\n          children: [\"Check the \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              backgroundColor: '#8FC382'\n            },\n            children: \"\\u201Cwanted\\u201D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 35\n          }, this), \" board and join the project.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }, this), \"Or you can recruit your own team members.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-5\",\n          style: {\n            color: '#2a3741'\n          },\n          children: [\"\\uD300\\uC6D0 \\uBAA8\\uC9D1\\uC744 \\uD655\\uC778\\uD558\\uACE0 \\uD504\\uB85C\\uC81D\\uD2B8\\uC5D0 \\uCC38\\uC5EC\\uD574\\uBCF4\\uC138\\uC694.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 25\n          }, this), \"\\uC6D0\\uD558\\uB294 \\uD504\\uB85C\\uC81D\\uD2B8\\uAC00 \\uC5C6\\uC744 \\uACBD\\uC6B0 \\uC9C1\\uC811 \\uD300\\uC6D0\\uC744 \\uBAA8\\uC9D1\\uD560 \\uC218 \\uC788\\uC5B4\\uC694.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: 6,\n        className: \"mb-3 justify-content-end\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: \"me-3 ml-auto\",\n          variant: \"primary\",\n          onClick: () => navigate('/wanted'),\n          style: {\n            backgroundColor: '#2A3741',\n            border: '0px',\n            fontSize: '0.8em'\n          },\n          children: \"\\uBAA9\\uB85D\\uC73C\\uB85C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }, this), isWantedEditable && /*#__PURE__*/_jsxDEV(Button, {\n          className: \"me-3 text-start\",\n          style: {\n            backgroundColor: '#2A3741',\n            border: '0px',\n            fontSize: '0.8em'\n          },\n          variant: \"primary\",\n          onClick: () => navigate('/wanted/update', {\n            state: {\n              wanted: wanted\n            }\n          }),\n          children: \"\\uC218\\uC815\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n            style: {\n              fontWeight: 'bold'\n            },\n            className: \"mt-3\",\n            children: wanted.wantedTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n            className: \"small mb-5 mt-2\",\n            style: {\n              color: 'grey'\n            },\n            children: [\"\\uC791\\uC131\\uC790 : \", writerName, \" \\xA0\\xA0\\xA0\\xA0 \\uC791\\uC131\\uC77C\\uC2DC : \", dateTime(wanted.createdAt)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: /*#__PURE__*/_jsxDEV(Card.Text, {\n            children: wanted.wantedContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            xs: \"auto\",\n            style: {\n              backgroundColor: '#EEEEEE',\n              borderRadius: '12px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(Card.Img, {\n                style: {\n                  width: '5rem',\n                  height: '5rem',\n                  borderRadius: '70%',\n                  overflow: 'hidden'\n                },\n                className: \"mb-3 mt-3 ms-2\",\n                src: writerImage,\n                alt: \"\\uD398\\uC774\\uC9C0 \\uC791\\uC131\\uC790\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                className: \"mt-3 ms-1 text-end\",\n                children: writerName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                style: {\n                  color: 'grey',\n                  fontSize: '0.8em'\n                },\n                className: \"ms-1\",\n                children: writerEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                style: {\n                  fontSize: '0.8em'\n                },\n                className: \"ms-1 mt-2\",\n                children: writerDescription\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Subtitle, {\n              className: \"mb-3 mt-5\",\n              style: {\n                color: '#2A3741',\n                fontWeight: 'bold'\n              },\n              children: [commentList.length, \"\\uAC1C\\uC758 \\uB313\\uAE00\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              placeholder: \"\\uB313\\uAE00\\uC744 \\uC791\\uC131\\uD558\\uC138\\uC694.\",\n              as: \"textarea\",\n              rows: 3,\n              value: commentSaveContent,\n              onChange: onChangeSaveComment,\n              style: {\n                borderRadius: '12px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              className: \"text-end\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"mt-3 ml-auto\",\n                style: {\n                  backgroundColor: '#2A3741',\n                  border: '0px',\n                  fontSize: '0.8em'\n                },\n                variant: \"primary\",\n                onClick: () => handleSubmit(wanted.userId),\n                children: \"\\uB313\\uAE00 \\uB4F1\\uB85D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: commentList.map(comment => {\n            var _userState$user$_id2;\n\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                xs: \"auto\",\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(Card.Img, {\n                    style: {\n                      width: '4rem',\n                      height: '4rem',\n                      borderRadius: '70%',\n                      overflow: 'hidden'\n                    },\n                    className: \"mb-3\",\n                    src: comment.userImageUri ? comment.userImageUri : 'http://placekitten.com/200/200',\n                    alt: \"\\uB313\\uAE00 \\uC791\\uC131\\uC790\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [/*#__PURE__*/_jsxDEV(Row, {\n                    className: \"mt-3\",\n                    children: comment.userName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Row, {\n                    style: {\n                      color: 'grey',\n                      fontSize: '0.8em'\n                    },\n                    className: \"mt-2\",\n                    children: /*#__PURE__*/_jsxDEV(CommentToRelative, {\n                      date: comment.createdAt\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 33\n              }, this), comment.isEdit === true ? /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  xs: 9,\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    placeholder: \"\\uB313\\uAE00\\uC744 \\uC791\\uC131\\uD558\\uC138\\uC694.\",\n                    as: \"textarea\",\n                    rows: 2,\n                    value: commentContent,\n                    onChange: onChangeComment\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 320,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  xs: 3,\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    className: \"me-3 ml-auto\",\n                    variant: \"primary\",\n                    onClick: () => handleCommentEditSubmit(comment._id),\n                    style: {\n                      border: '0px',\n                      fontSize: '0.8em'\n                    },\n                    children: \"\\uD655\\uC778\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 329,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    className: \"me-3 ml-auto\",\n                    variant: \"danger\",\n                    onClick: () => handleCommentEditRemove(comment._id),\n                    style: {\n                      fontSize: '0.8em'\n                    },\n                    children: \"\\uC0AD\\uC81C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    className: \"me-3 ml-auto\",\n                    variant: \"secondary\",\n                    onClick: () => handleCancel(comment._id),\n                    style: {\n                      fontSize: '0.8em'\n                    },\n                    children: \"\\uCDE8\\uC18C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  xs: 6,\n                  children: comment.commentContent\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  xs: 6,\n                  className: \"mb-3 text-end\",\n                  children: ((_userState$user$_id2 = userState.user._id) !== null && _userState$user$_id2 !== void 0 ? _userState$user$_id2 : userState.user.id) === comment.userId && /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"primary\",\n                    className: \"me-3\",\n                    onClick: () => handleCommentEdit(comment._id),\n                    style: {\n                      backgroundColor: '#2A3741',\n                      border: '0px',\n                      fontSize: '0.8em'\n                    },\n                    children: \"\\uB313\\uAE00 \\uC218\\uC815\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 33\n              }, this)]\n            }, comment._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 29\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 9\n  }, this);\n}\n\n_s(WantedUpdate, \"8TexpqipD8EZYHUfiIKROKyJIGo=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c2 = WantedUpdate;\nexport default WantedUpdate;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CommentToRelative\");\n$RefreshReg$(_c2, \"WantedUpdate\");","map":{"version":3,"sources":["/Users/luna/Documents/Elice_1st_Project/portfolio-share-service-racer/front/src/pages/wanted/WantedRead.js"],"names":["React","useEffect","useContext","useState","useCallback","useNavigate","useLocation","Container","Row","Col","Card","Form","Button","Api","UserStateContext","DateTime","CommentToRelative","date","preDate","Date","luxonDate","fromJSDate","toRelative","WantedUpdate","navigate","commentSaveContent","setCommentSaveContent","commentContent","setCommentContent","writerName","setWriterName","writerEmail","setWriterEmail","writerImage","setWriterImage","writerDescription","setWriterDescription","commentList","setCommentList","isSave","setIsSave","userState","state","wanted","isWantedEditable","user","_id","id","userId","onChangeSaveComment","e","target","value","onChangeComment","fetchWriterInfo","res","get","writerInfo","data","userInfo","console","log","name","email","description","userImage","imageUri","err","response","status","alert","error","fetchCommentList","handleSubmit","post","handleCommentEdit","prevComments","map","comment","isEdit","filter","handleCommentEditSubmit","put","handleCommentEditRemove","delete","handleCancel","dateTime","dateStr","year","getFullYear","month","String","getMonth","padStart","day","getDate","timeString","toLocaleTimeString","pathname","window","location","startsWith","document","body","classList","add","remove","color","fontWeight","backgroundColor","border","fontSize","wantedTitle","createdAt","wantedContent","borderRadius","width","height","overflow","length","userImageUri","userName"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useContext, useState, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Container, Row, Col, Card, Form, Button } from 'react-bootstrap';\n\nimport * as Api from '../../api';\nimport { UserStateContext } from '../../App';\n\nimport { DateTime } from 'luxon';\n\nconst CommentToRelative = ({ date }) => {\n    const preDate = new Date(date);\n    const luxonDate = DateTime.fromJSDate(preDate);\n    return <>{luxonDate.toRelative()}</>;\n};\n\nfunction WantedUpdate() {\n    const navigate = useNavigate();\n    const [commentSaveContent, setCommentSaveContent] = useState('');\n    const [commentContent, setCommentContent] = useState('');\n    const [writerName, setWriterName] = useState('');\n    const [writerEmail, setWriterEmail] = useState('');\n    const [writerImage, setWriterImage] = useState('');\n    const [writerDescription, setWriterDescription] = useState('');\n    const [commentList, setCommentList] = useState([]);\n    const [isSave, setIsSave] = useState(false);\n\n    const userState = useContext(UserStateContext);\n    const { state } = useLocation();\n    const { wanted } = state;\n\n    const isWantedEditable = (userState.user._id ?? userState.user.id) === wanted.userId;\n\n    const onChangeSaveComment = e => {\n        setCommentSaveContent(e.target.value);\n    };\n\n    const onChangeComment = e => {\n        setCommentContent(e.target.value);\n    };\n\n    const fetchWriterInfo = useCallback(async () => {\n        try {\n            const userId = wanted.userId;\n            // \"/user/user_id\" 엔드포인트로 get요청함.(userId는 req.currentUserId 사용)\n            const res = await Api.get(`user/${userId}`);\n            const writerInfo = res.data.userInfo;\n            console.log(writerInfo);\n            setWriterName(writerInfo.name);\n            setWriterEmail(writerInfo.email);\n            setWriterDescription(writerInfo.description);\n\n            if (!writerInfo.userImage) {\n                setWriterImage('http://placekitten.com/200/200');\n            } else {\n                setWriterImage(writerInfo.userImage.imageUri);\n            }\n        } catch (err) {\n            if (err.response.status === 400) {\n                alert(err.response.data.error);\n            }\n\n            console.log('작성자 불러오기에 실패하였습니다.', err);\n        }\n    }, [wanted.userId]);\n\n    const fetchCommentList = useCallback(async () => {\n        try {\n            const res = await Api.get(`comment/${wanted._id}`);\n            setCommentList(res.data);\n            setIsSave(false);\n        } catch (err) {\n            if (err.response.status === 400) {\n                alert(err.response.data.error);\n            }\n        }\n    }, [wanted._id, isSave]);\n\n    const handleSubmit = async () => {\n        try {\n            // \"comment/wantedId\" 엔드포인트로 post요청함.\n            await Api.post(`comment/${wanted._id}`, {\n                commentSaveContent,\n            });\n\n            setCommentSaveContent('');\n\n            setIsSave(true);\n        } catch (err) {\n            if (err.response.status === 400) {\n                alert(err.response.data.error);\n            }\n\n            console.log('댓글 추가에 실패하였습니다.', err);\n        }\n    };\n\n    const handleCommentEdit = id => {\n        setCommentList(prevComments => {\n            return prevComments.map(comment => {\n                if (comment._id === id) {\n                    return {\n                        ...comment,\n                        isEdit: true,\n                    };\n                } else {\n                    return comment;\n                }\n            });\n        });\n        const comment = commentList.filter(comment => comment._id === id)[0];\n        setCommentContent(comment.commentContent);\n    };\n\n    const handleCommentEditSubmit = async id => {\n        try {\n            // \"comment/commentId\" 엔드포인트로 put요청함.\n            await Api.put(`comment/${id}`, {\n                commentContent,\n            });\n\n            setCommentContent('');\n\n            setIsSave(true);\n        } catch (err) {\n            if (err.response.status === 400) {\n                alert(err.response.data.error);\n            }\n\n            console.log('댓글수정에 실패하였습니다.');\n        }\n    };\n\n    const handleCommentEditRemove = async id => {\n        try {\n            // \"comment/commentId\" 엔드포인트로 delete요청함.\n            await Api.delete(`comment/${id}`);\n\n            setCommentContent('');\n\n            setIsSave(true);\n        } catch (err) {\n            if (err.response.status === 400) {\n                alert(err.response.data.error);\n            }\n\n            console.log('댓글삭제에 실패하였습니다.');\n        }\n    };\n\n    const handleCancel = id => {\n        setCommentList(prevComments => {\n            return prevComments.map(comment => {\n                if (comment._id === id) {\n                    return {\n                        ...comment,\n                        isEdit: false,\n                    };\n                } else {\n                    return comment;\n                }\n            });\n        });\n    };\n\n    //작성일자, 시간의 표현값을 변환해주는 함수\n    function dateTime(dateStr) {\n        const date = new Date(dateStr);\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        const timeString = date.toLocaleTimeString();\n\n        return `${year}-${month}-${day} ${timeString}`;\n    }\n\n    //페이지 경로에 따라 배경색이 달라짐\n    useEffect(() => {\n        const { pathname } = window.location;\n        if (pathname.startsWith('/user') || pathname === '/network' || pathname === '/wanted/read' || pathname === '/') {\n            document.body.classList.add('portfolio');\n        } else {\n            document.body.classList.remove('portfolio');\n        }\n        // cleanup 함수\n        return () => {\n            document.body.classList.remove('portfolio');\n        };\n    }, []);\n\n    useEffect(() => {\n        // 만약 전역 상태의 user가 null이라면, 로그인 페이지로 이동함.\n        if (!userState.user) {\n            navigate('/login');\n            return;\n        }\n\n        fetchWriterInfo();\n        fetchCommentList();\n    }, [userState, navigate, fetchWriterInfo, fetchCommentList]);\n\n    return (\n        <Container>\n            <Row xs=\"auto\">\n                <Col xs={12} className=\"text-left text-center\">\n                    <h3 className=\"mt-5\" style={{ color: '#2a3741', fontWeight: '800' }}>\n                        Check the <span style={{ backgroundColor: '#8FC382' }}>“wanted”</span> board and join the project.\n                        <br />\n                        Or you can recruit your own team members.\n                    </h3>\n                    <p className=\"mb-5\" style={{ color: '#2a3741' }}>\n                        팀원 모집을 확인하고 프로젝트에 참여해보세요.\n                        <br />\n                        원하는 프로젝트가 없을 경우 직접 팀원을 모집할 수 있어요.\n                    </p>\n                </Col>\n\n                <Col xs={6} className=\"mb-3 justify-content-end\">\n                    <Button\n                        className=\"me-3 ml-auto\"\n                        variant=\"primary\"\n                        onClick={() => navigate('/wanted')}\n                        style={{ backgroundColor: '#2A3741', border: '0px', fontSize: '0.8em' }}>\n                        목록으로\n                    </Button>\n                    {isWantedEditable && (\n                        <Button\n                            className=\"me-3 text-start\"\n                            style={{ backgroundColor: '#2A3741', border: '0px', fontSize: '0.8em' }}\n                            variant=\"primary\"\n                            onClick={() => navigate('/wanted/update', { state: { wanted: wanted } })}>\n                            수정하기\n                        </Button>\n                    )}\n                </Col>\n            </Row>\n            <Row>\n                <Card className=\"mb-3\">\n                    <Card.Body>\n                        <Card.Title style={{ fontWeight: 'bold' }} className=\"mt-3\">\n                            {wanted.wantedTitle}\n                        </Card.Title>\n                        <Card.Subtitle className=\"small mb-5 mt-2\" style={{ color: 'grey' }}>\n                            작성자 : {writerName} &nbsp;&nbsp;&nbsp;&nbsp; 작성일시 : {dateTime(wanted.createdAt)}\n                        </Card.Subtitle>\n                        <hr />\n                    </Card.Body>\n                    <Card.Body>\n                        <Card.Text>{wanted.wantedContent}</Card.Text>\n                    </Card.Body>\n\n                    <Card.Body>\n                        <Row xs=\"auto\" style={{ backgroundColor: '#EEEEEE', borderRadius: '12px' }}>\n                            <Col>\n                                <Card.Img\n                                    style={{ width: '5rem', height: '5rem', borderRadius: '70%', overflow: 'hidden' }}\n                                    className=\"mb-3 mt-3 ms-2\"\n                                    src={writerImage}\n                                    alt=\"페이지 작성자\"\n                                />\n                            </Col>\n                            <Col>\n                                <Row className=\"mt-3 ms-1 text-end\">{writerName}</Row>\n                                <Row style={{ color: 'grey', fontSize: '0.8em' }} className=\"ms-1\">\n                                    {writerEmail}\n                                </Row>\n                                <Row style={{ fontSize: '0.8em' }} className=\"ms-1 mt-2\">\n                                    {writerDescription}\n                                </Row>\n                            </Col>\n                        </Row>\n                        <Row>\n                            <Card.Subtitle className=\"mb-3 mt-5\" style={{ color: '#2A3741', fontWeight: 'bold' }}>\n                                {commentList.length}개의 댓글\n                            </Card.Subtitle>\n                            <Form.Control\n                                placeholder=\"댓글을 작성하세요.\"\n                                as=\"textarea\"\n                                rows={3}\n                                value={commentSaveContent}\n                                onChange={onChangeSaveComment}\n                                style={{ borderRadius: '12px' }}\n                            />\n                        </Row>\n                        <Row>\n                            <Col className=\"text-end\">\n                                <Button\n                                    className=\"mt-3 ml-auto\"\n                                    style={{ backgroundColor: '#2A3741', border: '0px', fontSize: '0.8em' }}\n                                    variant=\"primary\"\n                                    onClick={() => handleSubmit(wanted.userId)}>\n                                    댓글 등록\n                                </Button>\n                            </Col>\n                        </Row>\n                    </Card.Body>\n                    <Card.Body>\n                        {commentList.map(comment => (\n                            <div key={comment._id}>\n                                <Row xs=\"auto\">\n                                    <Col>\n                                        <Card.Img\n                                            style={{ width: '4rem', height: '4rem', borderRadius: '70%', overflow: 'hidden' }}\n                                            className=\"mb-3\"\n                                            src={comment.userImageUri ? comment.userImageUri : 'http://placekitten.com/200/200'}\n                                            alt=\"댓글 작성자\"\n                                        />\n                                    </Col>\n                                    <Col>\n                                        <Row className=\"mt-3\">{comment.userName}</Row>\n                                        <Row style={{ color: 'grey', fontSize: '0.8em' }} className=\"mt-2\">\n                                            <CommentToRelative date={comment.createdAt} />\n                                        </Row>\n                                    </Col>\n                                </Row>\n\n                                {comment.isEdit === true ? (\n                                    <Row>\n                                        <Col xs={9}>\n                                            <Form.Control\n                                                placeholder=\"댓글을 작성하세요.\"\n                                                as=\"textarea\"\n                                                rows={2}\n                                                value={commentContent}\n                                                onChange={onChangeComment}\n                                            />\n                                        </Col>\n                                        <Col xs={3}>\n                                            <Button\n                                                className=\"me-3 ml-auto\"\n                                                variant=\"primary\"\n                                                onClick={() => handleCommentEditSubmit(comment._id)}\n                                                style={{ border: '0px', fontSize: '0.8em' }}>\n                                                확인\n                                            </Button>\n                                            <Button\n                                                className=\"me-3 ml-auto\"\n                                                variant=\"danger\"\n                                                onClick={() => handleCommentEditRemove(comment._id)}\n                                                style={{ fontSize: '0.8em' }}>\n                                                삭제\n                                            </Button>\n                                            <Button\n                                                className=\"me-3 ml-auto\"\n                                                variant=\"secondary\"\n                                                onClick={() => handleCancel(comment._id)}\n                                                style={{ fontSize: '0.8em' }}>\n                                                취소\n                                            </Button>\n                                        </Col>\n                                    </Row>\n                                ) : (\n                                    <Row>\n                                        <Col xs={6}>{comment.commentContent}</Col>\n                                        <Col xs={6} className=\"mb-3 text-end\">\n                                            {(userState.user._id ?? userState.user.id) === comment.userId && (\n                                                <Button\n                                                    variant=\"primary\"\n                                                    className=\"me-3\"\n                                                    onClick={() => handleCommentEdit(comment._id)}\n                                                    style={{ backgroundColor: '#2A3741', border: '0px', fontSize: '0.8em' }}>\n                                                    댓글 수정\n                                                </Button>\n                                            )}\n                                        </Col>\n                                    </Row>\n                                )}\n\n                                <hr />\n                            </div>\n                        ))}\n                    </Card.Body>\n                </Card>\n            </Row>\n        </Container>\n    );\n}\n\nexport default WantedUpdate;\n"]},"metadata":{},"sourceType":"module"}